<%=
  cells = @game.cells.map { |index, cell| cell.to_hash }
  moves = {}
  @game.moves.map do |index, move|
    moves[index] = move.reversibles.map {|cell| cell.to_hash } if move.is_a? Move
  end

  {
    message: @error,
    moves:   moves,
    cells:   cells,
    turn:    @game.turn,
    ended:   @game.ended?,
    white:   @game.cells.white.length,
    black:   @game.cells.black.length
  }.to_json
%>
