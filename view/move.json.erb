<%=
  cells = @board.cells.map { |index, cell| cell.to_hash }
  moves = {}
  @board.moves.map do |index, move|
    moves[index] = move.reversibles.map {|cell| cell.to_hash }
  end

  {
    message: @error,
    moves:   moves,
    cells:   cells,
    turn:    @board.turn,
    ended:   @board.ended?,
    white:   @board.cells.white.length,
    black:   @board.cells.black.length
  }.to_json
%>
